<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Six Pro - منصة نجاحك الدراسي</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('✅ SW مسجل:', reg.scope))
                    .catch(err => console.log('❌ فشل التسجيل:', err));
            });
        }
    </script>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="https://i.imgur.com/1l3hICE.png">
    <link rel="apple-touch-icon" href="https://i.imgur.com/1l3hICE.png">
    <meta name="theme-color" content="#1a237e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Six Pro">

    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #1a237e, #4db6ac);
            --accent-color: #4caf50;
            --accent-bg: rgba(76, 175, 80, 0.15);
            --icon-inactive: #7f8c8d;
            --card-bg: rgba(255, 255, 255, 0.92);
            --card-bg-hover: rgba(255, 255, 255, 0.98);
            --text-primary: #2c3e50;
            --text-secondary: #34495e;
            --border-radius: 18px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
            --shadow-hover: 0 6px 16px rgba(0, 0, 0, 0.1);
            --glass-blur: blur(12px);
            --font-arabic: 'Cairo', 'Tahoma', sans-serif;
            --font-arabic-bold: 'Tajawal', 'Cairo', sans-serif;
            --nav-height: 70px;
            --transition-smooth: all 0.25s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        * {
            margin: 0; padding: 0; box-sizing: border-box;
        }

        body {
            font-family: var(--font-arabic), sans-serif;
            background: var(--primary-gradient);
            color: var(--text-primary);
            padding-bottom: var(--nav-height);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .bubble-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; z-index: 0;
        }
        .bubble {
            position: absolute; border-radius: 50%;
            background: rgba(255, 255, 255, 0.05);
            animation: float 15s infinite ease-in-out;
        }
        @keyframes float {
            0%,100% { transform: translate(0,0); }
            25% { transform: translate(20px,15px); }
            50% { transform: translate(-10px,20px); }
            75% { transform: translate(15px,-10px); }
        }

        .content-wrapper {
            position: relative; z-index: 10;
            background: rgba(245, 247, 250, 0.9);
            border-top-left-radius: var(--border-radius);
            border-top-right-radius: var(--border-radius);
            padding: 20px;
            min-height: calc(100vh - var(--nav-height));
            margin-top: 20px;
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.15);
        }

        .app-header {
            position: fixed; top: 0; left: 0; right: 0;
            text-align: center; padding: 15px 20px;
            background: var(--primary-gradient);
            z-index: 1001;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        .app-title {
            font-size: clamp(1.4rem, 3vw, 1.8rem);
            font-weight: 700; color: white;
            letter-spacing: -0.5px;
            font-family: var(--font-arabic-bold);
        }

        .main-screen { padding-top: 70px; }

        /* --- بطاقة الترحيب --- */
        .welcome-section {
            text-align: center; margin-bottom: 20px;
            padding: 25px 20px;
            background: var(--card-bg);
            backdrop-filter: var(--glass-blur);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            transition: var(--transition-smooth);
        }
        .welcome-section:hover { box-shadow: var(--shadow-hover); }
        .welcome-title {
            font-size: 1.6rem; font-weight: 600;
            color: var(--text-primary);
            font-family: var(--font-arabic-bold);
            line-height: 1.3;
        }
        .daily-goal {
            font-size: 1rem; color: var(--accent-color);
            font-weight: 500; margin-top: 10px;
        }

        /* --- شريط التنبيه --- */
        .alert-banner {
            background: linear-gradient(to right, #FFF3E0, #FFF8E0);
            border-right: 4px solid #FFA726;
            padding: 14px 20px;
            margin: 15px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            backdrop-filter: var(--glass-blur);
            color: #2c3e50;
            font-weight: 500;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            position: relative;
            max-height: 60px;
            overflow: hidden;
        }
        .alert-text {
            flex: 1; text-align: right;
            font-size: 0.95rem;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .alert-close {
            background: none; border: none; font-size: 1.3rem;
            color: #E65100; cursor: pointer;
            margin-right: 8px;
            padding: 4px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .alert-close:hover { background: rgba(230, 81, 0, 0.1); }

        /* --- بطاقات الأقسام --- */
        .features-grid {
            display: grid; grid-template-columns: repeat(2, 1fr);
            gap: 20px; margin-bottom: 20px;
        }
        .feature-card {
            background: var(--card-bg);
            backdrop-filter: var(--glass-blur);
            border-radius: var(--border-radius);
            padding: 20px 15px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition-smooth);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 140px;
            position: relative;
            overflow: hidden;
        }
        .feature-card:hover {
            background: var(--card-bg-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }
        .feature-card:active {
            transform: scale(0.98) translateY(1px);
            background: rgba(230, 245, 230, 0.95);
        }

        .feature-icon-wrapper {
            width: 64px; height: 64px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            margin-bottom: 12px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.06);
        }
        .feature-card:nth-child(1) .feature-icon-wrapper { background-color: #e8f5e9; }
        .feature-card:nth-child(2) .feature-icon-wrapper { background-color: #ffe0d0; }
        .feature-card:nth-child(3) .feature-icon-wrapper { background-color: #e3f2fd; }
        .feature-card:nth-child(4) .feature-icon-wrapper { background-color: #f3e5f5; }

        .feature-icon { font-size: 2.2rem; }
        .feature-card:nth-child(1) .feature-icon { color: #4CAF50; }
        .feature-card:nth-child(2) .feature-icon { color: #FF7043; }
        .feature-card:nth-child(3) .feature-icon { color: #2196F3; }
        .feature-card:nth-child(4) .feature-icon { color: #9C27B0; }

        .feature-name {
            font-size: 1.05rem; font-weight: 600;
            color: var(--text-primary);
            font-family: var(--font-arabic-bold);
        }

        /* --- النشاطات القادمة --- */
        .upcoming-section {
            margin-top: 20px;
            background: var(--card-bg);
            backdrop-filter: var(--glass-blur);
            border-radius: var(--border-radius);
            padding: 18px;
            box-shadow: var(--shadow);
        }
        .upcoming-title {
            font-size: 1.1rem; font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-primary);
            font-family: var(--font-arabic-bold);
            display: flex; align-items: center;
        }
        .upcoming-title i { margin-left: 8px; color: #3498db; }

        .days-filter {
            display: flex; overflow-x: auto;
            padding: 8px 0 12px;
            gap: 10px;
            scrollbar-width: none;
        }
        .days-filter::-webkit-scrollbar { display: none; }
        .day-tab {
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            white-space: nowrap;
            cursor: pointer;
            color: var(--text-secondary);
            background: #f5f7fa;
            transition: var(--transition-smooth);
        }
        .day-tab.active {
            background: var(--accent-bg);
            color: var(--accent-color);
            font-weight: 600;
        }

        .upcoming-list {
            list-style: none;
        }
        .upcoming-item {
            padding: 12px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            display: flex;
            align-items: flex-start;
        }
        .upcoming-item:last-child { border-bottom: none; }
        .activity-dot {
            width: 10px; height: 10px;
            border-radius: 50%;
            margin-left: 12px;
            margin-top: 6px;
            flex-shrink: 0;
        }
        .dot-review { background-color: #4CAF50; }
        .dot-exam { background-color: #F44336; }
        .dot-homework { background-color: #2196F3; }

        .upcoming-item-content {
            flex: 1;
        }
        .upcoming-item-title {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
            margin-bottom: 4px;
        }
        .upcoming-item-detail {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        .view-all {
            text-align: center;
            margin-top: 12px;
            color: var(--accent-color);
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .view-all:hover { text-decoration: underline; }

        /* --- ملخص الإنجازات اليومية --- */
        .daily-summary {
            margin-top: 20px;
            background: var(--card-bg);
            backdrop-filter: var(--glass-blur);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
            text-align: center;
        }
        .daily-summary-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-primary);
            font-family: var(--font-arabic-bold);
        }
        .progress-circle-small {
            width: 60px; height: 60px;
            margin: 0 auto 10px;
            position: relative;
        }
        .progress-bg, .progress-fill {
            position: absolute; width: 100%; height: 100%; border-radius: 50%;
        }
        .progress-bg { background: #e0e0e0; }
        .progress-fill {
            background: conic-gradient(var(--accent-color) 0deg 288deg, transparent 288deg 360deg);
            clip-path: circle(35% at 50% 50%);
        }
        .progress-percent {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-weight: 700; font-size: 1rem;
            color: var(--accent-color);
        }
        .daily-message {
            font-size: 0.95rem;
            color: var(--text-secondary);
        }

        /* --- شريط التنقل السفلي --- */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; right: 0;
            height: var(--nav-height);
            background: var(--card-bg);
            backdrop-filter: var(--glass-blur);
            border-top: 1px solid rgba(0,0,0,0.05);
            display: flex; justify-content: space-around;
            align-items: center;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        .nav-item {
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            width: 25%; height: 100%;
            text-decoration: none;
            color: var(--icon-inactive);
            font-size: 0.8rem;
            transition: var(--transition-smooth);
            position: relative;
            cursor: pointer;
            font-family: var(--font-arabic);
        }
        .nav-item.active {
            color: var(--accent-color);
        }
        .nav-icon {
            font-size: 1.6rem;
            margin-bottom: 4px;
            color: var(--icon-inactive);
            transition: var(--transition-smooth);
        }
        .nav-item.active .nav-icon {
            color: var(--accent-color);
        }
        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            width: 32px;
            height: 3px;
            background: var(--accent-color);
            border-radius: 2px;
        }

        /* --- عام --- */
        .ripple {
            position: absolute; border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.1);
            transform: scale(0);
            animation: ripple 0.5s ease-out;
            pointer-events: none;
        }
        @keyframes ripple {
            to { transform: scale(4); opacity: 0; }
        }

        @media (max-width: 480px) {
            .features-grid { grid-template-columns: 1fr; }
            .app-title { font-size: 1.5rem; }
        }

        .spinner {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 24px; height: 24px;
            border: 3px solid rgba(0, 0, 0, 0.1);
            border-top: 3px solid var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: none;
        }
        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
    </style>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="bubble-container" id="bubbleContainer"></div>

    <header class="app-header">
        <h1 class="app-title">الرئيسية</h1>
    </header>

    <div class="content-wrapper">
        <main class="main-screen" id="home-screen">
            <!-- شريط التنبيه -->
            <div class="alert-banner" id="alert-banner">
                <span class="alert-text" id="news-content">...جاري تحميل التذكير</span>
                <button class="alert-close" onclick="closeAlert()">×</button>
            </div>

            <!-- بطاقة الترحيب المخصصة -->
            <section class="welcome-section">
                <h2 class="welcome-title" id="personalized-welcome">أهلاً بك في Six Pro</h2>
                <div class="daily-goal" id="daily-goal-text">...جاري التحميل</div>
            </section>

            <!-- بطاقات الأقسام -->
            <div class="features-grid">
                <div class="feature-card" onclick="smoothNavigate('tasks.html')">
                    <div class="feature-icon-wrapper">
                        <span class="feature-icon material-icons">assignment</span>
                    </div>
                    <div class="feature-name">المهام اليومية</div>
                    <div class="spinner" id="spinner-tasks"></div>
                </div>
                <div class="feature-card" onclick="smoothNavigate('math.html')">
                    <div class="feature-icon-wrapper">
                        <span class="feature-icon material-icons">calculate</span>
                    </div>
                    <div class="feature-name">الرياضيات</div>
                    <div class="spinner" id="spinner-math"></div>
                </div>
                <div class="feature-card" onclick="smoothNavigate('english.html')">
                    <div class="feature-icon-wrapper">
                        <span class="feature-icon material-icons">translate</span>
                    </div>
                    <div class="feature-name">الإنكليزي</div>
                    <div class="spinner" id="spinner-english"></div>
                </div>
                <div class="feature-card" onclick="smoothNavigate('schedule.html')">
                    <div class="feature-icon-wrapper">
                        <span class="feature-icon material-icons">calendar_today</span>
                    </div>
                    <div class="feature-name">الجدول الدراسي</div>
                    <div class="spinner" id="spinner-schedule"></div>
                </div>
            </div>

            <!-- النشاطات القادمة -->
            <section class="upcoming-section">
                <h3 class="upcoming-title">
                    <i class="material-icons">event_upcoming</i>
                    النشاطات القادمة
                </h3>
                <div class="days-filter" id="days-filter">
                    <div class="day-tab active">اليوم</div>
                    <div class="day-tab">غدًا</div>
                    <div class="day-tab">الاثنين</div>
                    <div class="day-tab">الثلاثاء</div>
                    <div class="day-tab">الأربعاء</div>
                </div>
                <ul class="upcoming-list">
                    <li class="upcoming-item">
                        <div class="activity-dot dot-review"></div>
                        <div class="upcoming-item-content">
                            <div class="upcoming-item-title">مراجعة الفصل الثالث في العلوم</div>
                            <div class="upcoming-item-detail">غدًا، 11:00 ص • علوم</div>
                        </div>
                    </li>
                    <li class="upcoming-item">
                        <div class="activity-dot dot-exam"></div>
                        <div class="upcoming-item-content">
                            <div class="upcoming-item-title">اختبار قصير في الرياضيات</div>
                            <div class="upcoming-item-detail">الاثنين، 10:00 ص • رياضيات</div>
                        </div>
                    </li>
                    <li class="upcoming-item">
                        <div class="activity-dot dot-homework"></div>
                        <div class="upcoming-item-content">
                            <div class="upcoming-item-title">تمارين الأفعال غير المنتظمة</div>
                            <div class="upcoming-item-detail">الأربعاء، 2:00 م • إنكليزي</div>
                        </div>
                    </li>
                </ul>
                <div class="view-all" onclick="smoothNavigate('calendar.html')">
                    عرض كل النشاطات
                    <span class="material-icons" style="font-size:1.2rem;">chevron_right</span>
                </div>
            </section>

            <!-- ملخص الإنجازات اليومية -->
            <section class="daily-summary">
                <h3 class="daily-summary-title">ملخص إنجازاتك اليوم</h3>
                <div class="progress-circle-small">
                    <div class="progress-bg"></div>
                    <div class="progress-fill"></div>
                    <div class="progress-percent">80%</div>
                </div>
                <div class="daily-message">أكملت 80% من مهام اليوم! استمر.</div>
            </section>
        </main>
    </div>

    <!-- شريط التنقل السفلي -->
    <nav class="bottom-nav">
        <a href="index.html" class="nav-item active" onclick="handleNavClick(this, 'index.html')" aria-label="الصفحة الرئيسية">
            <span class="nav-icon material-icons">home</span>
            <span>الرئيسية</span>
        </a>
        <a href="stats.html" class="nav-item" onclick="smoothNavigate('stats.html')" aria-label="التقدم">
            <span class="nav-icon material-icons">bar_chart</span>
            <span>التقدم</span>
        </a>
        <a href="alerts.html" class="nav-item" onclick="smoothNavigate('alerts.html')" aria-label="الإشعارات">
            <span class="nav-icon material-icons">notifications</span>
            <span>الإشعارات</span>
        </a>
        <a href="settings.html" class="nav-item" onclick="smoothNavigate('settings.html')" aria-label="الإعدادات">
            <span class="nav-icon material-icons">settings</span>
            <span>الإعدادات</span>
        </a>
    </nav>

    <script>
        // --- دوال التهيئة ---
        function createBubbles() {
            const c = document.getElementById('bubbleContainer');
            for (let i = 0; i < 15; i++) {
                const b = document.createElement('div');
                b.classList.add('bubble');
                b.style.width = b.style.height = `${Math.random() * 100 + 20}px`;
                b.style.left = `${Math.random() * 100}%`;
                b.style.top = `${Math.random() * 100}%`;
                b.style.animationDelay = `${Math.random() * 5}s`;
                c.appendChild(b);
            }
        }

        function createRipple(e, el) {
            const rect = el.getBoundingClientRect();
            const x = e.clientX - rect.left, y = e.clientY - rect.top;
            const r = document.createElement('span');
            r.classList.add('ripple');
            r.style.left = `${x}px`; r.style.top = `${y}px`;
            el.querySelector('.ripple')?.remove();
            el.appendChild(r);
            setTimeout(() => r.remove(), 500);
        }

        function triggerHaptic() {
            if (navigator.vibrate) navigator.vibrate(8);
        }

        function smoothNavigate(url) {
            const id = `spinner-${url.split('.')[0]}`;
            const s = document.getElementById(id);
            if (s) s.style.display = 'block';
            document.body.style.opacity = 0;
            document.body.style.transition = 'opacity 0.25s ease';
            setTimeout(() => window.location.href = url, 250);
        }

        function closeAlert() {
            document.getElementById('alert-banner').style.display = 'none';
        }

        // --- دوال التحديث ---
        function updateProgress() {
            const tasks = JSON.parse(localStorage.getItem('dailyTasks') || '[]');
            const completed = tasks.filter(t => t.completed).length;
            const total = Math.max(tasks.length, 1);
            const remaining = total - completed;
            const el = document.getElementById('daily-goal-text');
            if (el) el.textContent = `متبقي لك ${remaining} مهام لهذا اليوم!`;
        }

        function updateNewsCard() {
            const el = document.getElementById('news-content');
            if (!el) return;
            const msgs = [
                "لديك امتحان فيزياء في الساعة 4:00 عصراً اليوم. راجع ملاحظات الفصل الثالث.",
                "لقد حان الوقت لمراجعة جدولك الدراسي لهذا الأسبوع.",
                "لا تنسى إكمال تمارين الرياضيات المخصصة لهذا اليوم.",
                "تم إضافة محتوى جديد في قسم العلوم. تحقق من القسم المغلق!",
                "لديك 3 مهام معلقة في قائمة المهام. ابدأ بها الآن!",
                "تذكير: امتحان الكيمياء بعد غد. راجع الفصل الأول والثاني."
            ];
            el.textContent = msgs[Math.floor(Math.random() * msgs.length)];
        }

        function personalizeWelcome() {
            const name = localStorage.getItem('userName') || null;
            const el = document.getElementById('personalized-welcome');
            if (el) {
                el.textContent = name ? `أهلاً بك يا ${name}` : 'أهلاً بك في Six Pro';
            }
        }

        // --- تفاعلات المستخدم ---
        document.querySelectorAll('.feature-card, .nav-item, .view-all, .day-tab').forEach(el => {
            el.addEventListener('click', function(e) {
                if (!this.classList.contains('day-tab')) {
                    createRipple(e, this);
                    triggerHaptic();
                }
                if (this.classList.contains('day-tab')) {
                    document.querySelectorAll('.day-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                }
            });
        });

        document.querySelectorAll('.feature-card, .nav-item').forEach(el => {
            el.addEventListener('keydown', e => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault(); this.click();
                }
            });
        });

        function handleNavClick(el, url) {
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            el.classList.add('active');
            smoothNavigate(url);
        }

        // --- التحميل ---
        window.onload = createBubbles;
        document.addEventListener('DOMContentLoaded', () => {
            updateProgress();
            updateNewsCard();
            personalizeWelcome();
        });
    </script>

</body>
</html>
